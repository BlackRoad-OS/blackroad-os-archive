# Notion Integration Configuration
# https://developers.notion.com/

version: "1.0"
provider: notion

# API Configuration
api:
  version: "2022-06-28"
  base_url: https://api.notion.com/v1
  # Set via environment: NOTION_API_KEY

# Workspace Structure
workspace:
  name: BlackRoad OS

# Database Templates
databases:
  # Documentation Database
  - name: Documentation
    icon: üìö
    properties:
      Title:
        type: title
      Category:
        type: select
        options:
          - name: Guide
            color: blue
          - name: Reference
            color: green
          - name: Tutorial
            color: purple
          - name: API Docs
            color: orange
      Status:
        type: select
        options:
          - name: Draft
            color: gray
          - name: Review
            color: yellow
          - name: Published
            color: green
      Author:
        type: people
      Last Updated:
        type: last_edited_time
      Tags:
        type: multi_select
        options:
          - API
          - Infrastructure
          - Frontend
          - Backend
          - DevOps

  # Knowledge Base
  - name: Knowledge Base
    icon: üß†
    properties:
      Title:
        type: title
      Type:
        type: select
        options:
          - name: Decision
            color: blue
          - name: RFC
            color: purple
          - name: Postmortem
            color: red
          - name: Research
            color: green
      Status:
        type: status
        groups:
          - name: Not Started
            options: [Not Started]
          - name: In Progress
            options: [Drafting, Review]
          - name: Complete
            options: [Approved, Published]
      Owner:
        type: people
      Related Docs:
        type: relation
        database: Documentation
      Created:
        type: created_time

  # Team Directory
  - name: Team Directory
    icon: üë•
    properties:
      Name:
        type: title
      Role:
        type: select
        options:
          - Engineering
          - Product
          - Design
          - Operations
      Email:
        type: email
      GitHub:
        type: url
      Start Date:
        type: date
      Status:
        type: select
        options:
          - name: Active
            color: green
          - name: On Leave
            color: yellow
          - name: Alumni
            color: gray

  # Project Tracker
  - name: Projects
    icon: üéØ
    properties:
      Name:
        type: title
      Status:
        type: status
        groups:
          - name: Planning
            options: [Ideation, Scoping]
          - name: Active
            options: [In Development, Testing]
          - name: Complete
            options: [Launched, Archived]
      Priority:
        type: select
        options:
          - name: P0
            color: red
          - name: P1
            color: orange
          - name: P2
            color: yellow
          - name: P3
            color: blue
      Owner:
        type: people
      Team:
        type: multi_select
        options:
          - Engineering
          - Product
          - Design
      Timeline:
        type: date
        include_time: false
      GitHub Repo:
        type: url
      Asana Project:
        type: url

  # Meeting Notes
  - name: Meeting Notes
    icon: üìù
    properties:
      Title:
        type: title
      Date:
        type: date
      Type:
        type: select
        options:
          - name: Standup
            color: blue
          - name: Planning
            color: purple
          - name: Retro
            color: green
          - name: 1:1
            color: orange
          - name: All Hands
            color: red
      Attendees:
        type: people
      Recording:
        type: url
      Action Items:
        type: relation
        database: Projects

# Page Templates
templates:
  # RFC Template
  - name: RFC Template
    database: Knowledge Base
    properties:
      Type: RFC
      Status: Drafting
    content: |
      # RFC: [Title]

      ## Summary
      Brief description of the proposal.

      ## Motivation
      Why are we doing this?

      ## Detailed Design
      Technical details of the implementation.

      ## Alternatives Considered
      Other approaches that were evaluated.

      ## Open Questions
      - Question 1?
      - Question 2?

      ## Timeline
      Estimated implementation timeline.

  # Postmortem Template
  - name: Postmortem Template
    database: Knowledge Base
    properties:
      Type: Postmortem
      Status: Drafting
    content: |
      # Postmortem: [Incident Title]

      **Date:** [Date]
      **Duration:** [X hours]
      **Severity:** [P0/P1/P2]

      ## Summary
      Brief description of what happened.

      ## Timeline
      | Time | Event |
      |------|-------|
      | HH:MM | Event description |

      ## Root Cause
      What caused the incident.

      ## Impact
      - Users affected: X
      - Revenue impact: $X

      ## Action Items
      - [ ] Action 1 (Owner, Due Date)
      - [ ] Action 2 (Owner, Due Date)

      ## Lessons Learned
      What we learned from this incident.

# Integrations
integrations:
  # Slack Integration
  slack:
    enabled: true
    workspace: blackroad-os
    notifications:
      - database: Knowledge Base
        events: [page_created, status_changed]
        channel: "#documentation"

  # GitHub Integration
  github:
    enabled: true
    sync_issues: false  # Use Asana for issue tracking
    link_repos: true

# API Sync Configuration
sync:
  # Sync documentation to static site
  docs_export:
    enabled: true
    database: Documentation
    filter:
      Status: Published
    export_path: /docs
    format: markdown

  # Sync team directory
  team_sync:
    enabled: true
    database: Team Directory
    webhook_url: https://api.blackroad.io/webhooks/notion/team

# Permissions
permissions:
  default_access: comment
  team_access: edit
  admin_pages:
    - Settings
    - Integrations
